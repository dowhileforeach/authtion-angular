<section class="authtion-personal">
  <h2>Personal information</h2>

  <form class="dwfe-form  authtion-personal__form" spellcheck="false">

    <div class="authtion-personal__form-wrap  authtion-personal__form-wrap--left">

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'Email'"
                             [markIfChanged]="true"
                             (takeGroup)="gEmail=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.emailNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tEmail=$event"
                               (takeHasBeenChanged)="emailNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'Nick Name'"
                             [markIfChanged]="true"
                             [cancel$]="subjCancel.asObservable()"
                             (takeGroup)="gNickName=$event"
                             (takeHasBeenChanged)="nickName_changed=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.nickNameNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tNickName=$event"
                               (takeHasBeenChanged)="nickNameNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'First Name'"
                             [markIfChanged]="true"
                             [cancel$]="subjCancel.asObservable()"
                             (takeGroup)="gFirstName=$event"
                             (takeHasBeenChanged)="firstName_changed=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.firstNameNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tFirstName=$event"
                               (takeHasBeenChanged)="firstNameNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'Middle Name'"
                             [markIfChanged]="true"
                             [cancel$]="subjCancel.asObservable()"
                             (takeGroup)="gMiddleName=$event"
                             (takeHasBeenChanged)="middleName_changed=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.middleNameNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tMiddleName=$event"
                               (takeHasBeenChanged)="middleNameNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'Last Name'"
                             [markIfChanged]="true"
                             [cancel$]="subjCancel.asObservable()"
                             (takeGroup)="gLastName=$event"
                             (takeHasBeenChanged)="lastName_changed=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.lastNameNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tLastName=$event"
                               (takeHasBeenChanged)="lastNameNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

    </div>

    <div class="authtion-personal__form-wrap">

      <div class="authtion-personal__group">
        <app-select-dwfe class="authtion-personal__group-control"
                         [labelText]="'Gender'"
                         [markIfChanged]="true"
                         [items]="genders"
                         [selectedValue]="user.gender"
                         [cancel$]="subjCancel.asObservable()"
                         (takeValue)="gender=$event"
                         (takeHasBeenChanged)="gender_changed=$event">
        </app-select-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.genderNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tGender=$event"
                               (takeHasBeenChanged)="genderNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-date-picker-dwfe class="authtion-personal__group-control"
                              [labelText]="'Date of Birth'"
                              [markIfChanged]="true"
                              [cancel$]="subjCancel.asObservable()"
                              (takeGroup)="gDateOfBirth=$event"
                              (takeHasBeenChanged)="dateOfBirth_changed=$event">
        </app-date-picker-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.dateOfBirthNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tDateOfBirth=$event"
                               (takeHasBeenChanged)="dateOfBirthNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-select-dwfe class="authtion-personal__group-control"
                         [labelText]="'Country'"
                         [markIfChanged]="true"
                         [items]="countries"
                         [selectedValue]="user.country"
                         [cancel$]="subjCancel.asObservable()"
                         (takeValue)="country=$event"
                         (takeHasBeenChanged)="country_changed=$event">
        </app-select-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.countryNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tCountry=$event"
                               (takeHasBeenChanged)="countryNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'City'"
                             [markIfChanged]="true"
                             [cancel$]="subjCancel.asObservable()"
                             (takeGroup)="gCity=$event"
                             (takeHasBeenChanged)="city_changed=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.cityNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tCity=$event"
                               (takeHasBeenChanged)="cityNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

      <div class="authtion-personal__group">
        <app-input-text-dwfe class="authtion-personal__group-control"
                             [labelText]="'Company'"
                             [markIfChanged]="true"
                             [cancel$]="subjCancel.asObservable()"
                             (takeGroup)="gCompany=$event"
                             (takeHasBeenChanged)="company_changed=$event">
        </app-input-text-dwfe>

        <app-slide-toggle-dwfe class="authtion-personal__group-vis-checker"
                               [currentValue]="!user.companyNonPublic"
                               [markIfChanged]="true"
                               [cancel$]="subjCancel.asObservable()"
                               (takeValue)="tCompany=$event"
                               (takeHasBeenChanged)="companyNonPublic_changed=$event">
        </app-slide-toggle-dwfe>
      </div>

    </div>

    <div class="dwfe-pending-overlay__wrap" tabindex="-1" #refPendingOverlayWrap *ngIf="isLocked">
      <div class="dwfe-pending-overlay" *ngIf="isLocked">
        <app-spinner-shark-fin-circle-dwfe></app-spinner-shark-fin-circle-dwfe>
      </div>
    </div>

  </form>


  <div class="authtion-personal__action-wrap">
    <button class="dwfe-form__btn  dwfe-form__btn--attraction  authtion-personal__action"
            mat-raised-button
            (click)="performUpdateAccount()"
            [disabled]="!hasPageBeenChanged() || isLocked"
            aria-label="Perform 'Update Account'">
      Save
      <app-alert-dwfe *ngIf="errorMessage !== ''"
                      class="dwfe-form__alert-over"
                      [message]="errorMessage"
                      [blink]="true">
      </app-alert-dwfe>
      <app-alert-dwfe *ngIf="successMessage !== ''"
                      class="dwfe-form__alert-over"
                      [message]="successMessage"
                      [alertType]="'success'"
                      [blink]="true">
      </app-alert-dwfe>
    </button>

    <button class="dwfe-form__btn  dwfe-form__btn--standard  authtion-personal__action"
            mat-raised-button
            (click)="performCancelChanges()"
            [disabled]="!hasPageBeenChanged() || isLocked"
            aria-label="Perform 'Cancel changes'">
      Cancel
    </button>
  </div>

</section>
