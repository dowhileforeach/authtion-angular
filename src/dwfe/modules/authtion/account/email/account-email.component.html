<section class="authtion-account-email">

  <form class="dwfe-form" spellcheck="false">

    <app-input-text-dwfe class="authtion-account-email__current-email"
                         [labelText]="'Email'"
                         (takeControl)="cCurrentEmail=$event">
    </app-input-text-dwfe>

    <h2>Change Email</h2>

    <app-input-email-dwfe class="dwfe-form__item"
                          [externalBackendValidator]="exchangeService.backendValidatorEmail.bind(exchangeService)"
                          [labelText]="'New Email'"
                          (takeControl)="cNewEmail=$event">
    </app-input-email-dwfe>

    <app-input-password-dwfe class="dwfe-form__item"
                             [labelText]="'Your Current Password'"
                             (takeControl)="cCurrentPassword=$event">
    </app-input-password-dwfe>

    <p class="authtion-account-email__note">
      Please note that after a successful email change, you will automatically logout
    </p>

    <button class="dwfe-form__btn  dwfe-form__btn--standard"
            mat-raised-button
            (click)="performChangeEmail()"
            [disabled]="!(cEmail && cCurrentPassword && cEmail.valid && cCurrentPassword.valid) || isLocked"
            aria-label="Perform 'Change Email'">
      OK
      <app-alert-dwfe *ngIf="errorMessage !== ''"
                      class="dwfe-form__alert-over"
                      [message]="errorMessage"
                      [blink]="true">
      </app-alert-dwfe>
      <app-alert-dwfe *ngIf="successMessage !== ''"
                      class="dwfe-form__alert-over"
                      [message]="successMessage"
                      [alertType]="'success'"
                      [blink]="true">
      </app-alert-dwfe>
    </button>

  </form>

</section>
